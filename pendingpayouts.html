<!DOCTYPE html>
<html> <head>
  <title>steemviz.com : pending payout calculator</title>
  <meta name="description" content="steemviz displays all transactions on the steem network blockchain in real time."> <meta property="og:title" content="steem network realtime vizualisation"> <meta property="og:site_name" content="steemviz.com">
  <meta property="og:description" content="steemviz displays all transactions on the steem network blockchain in real time.">
  <meta charset="UTF-8">
  <script src="steem.min.js"></script><script src="jquery.min.js"></script>
  <script type="text/javascript">
  var post='';var posts=[];var total=0;var pending='';var pending2=0;var results='';
  function loadposts(username) {
   results='';pending2=0;total=0;
   steem.api.getState('/@'+username, function(err, result) {
     if (err){console.log(err);}
     var sortindex=result['accounts'][username]['blog'];
     for (var i=0;i<sortindex.length;i+=1) {
       var handle = sortindex[i].split('/');
       var postauthor = handle[0];var postpermlink = handle[1];
       post=result['content'][postauthor+'/'+postpermlink];
       if (post['author']==username && post['max_accepted_payout']!='0.000 SBD' && post['pending_payout_value']!='0.000 SBD'){
         console.log(post);
         results+='"<a href=\"https://steemit.com/@'+post['author']+'/'+post['permlink']+'\" title=\"'+post['cashout_time']+'\">'+post['title']+'</a>" - <strong>'+post['pending_payout_value']+'</strong><br />';
         pending=post['pending_payout_value'].split(" ");
         pending2=Number(pending[0]);
         total=pending2+total;
         $("#results").html(results);
       }
     }
     results+='<br /><strong style="text-decoration:underline;">Total pending payouts : '+total+' SBD</strong><br /><br />';
     $("#results").html(results);
  })
}
  $(document).ready(function() {
     $("#userform").submit(function(event) {
       event.preventDefault();
       $("#results").html("<img src=loader.gif>");
       var username = $("#username").val();
       loadposts(username);
     }
  )});
  </script>
  <style type="text/css">
    body {height:100%;text-align:center;}
    #outerContainer {height:100%;width:80%;margin:0 auto;}
    .logo {text-align:center;clear:both;margin:0 auto;height:100px;}
    a {text-decoration:none;font-weight:bold;color:rgb(26, 80, 153);}
    #username {text-align:center;color:rgb(26, 80, 153);}
  </style>
</head><body>
<div id="outerContainer">
  <a href="https://steemviz.com"><img src="steemvizlogo1b6ac.png" class="logo"></a><br /><br />
  <strong>Check your pending steemit payouts</strong><br /><br />
  <form id="userform"><input type="text" id="username" name="username" value="username"><input type="submit" value="check account"></form><br /><br />
  <div id="results"></div>
  </div>
</div>
</body></html>
