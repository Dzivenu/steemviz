<!DOCTYPE html>
<html> <head>
  <title>steemviz.com/promo : how much should I promote my steemit post for today ?</title>
  <meta charset="UTF-8">
  <script src="./steem.min.js"></script>
  <script src="./sorttable.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>

<script type="text/javascript">
  var promotedcontent;
  var tablecontents = '';
  steem.api.getState('/promoted', function(err, result) {
  console.log(err, result);
  promotedcontent = result.content;
  tablecontents += '<center><table class="sortable" id="promotable"><thead><tr><th>Paid</th><th>Title</th><th>Earned</th></tr></thead><tbody>';
  for (var key in promotedcontent) {
    var obj = promotedcontent[key];
    var promotedamountint = 1;
    var promotedamountstring = obj["promoted"].split(" ");
    promotedamountint = parseFloat(promotedamountstring[0]).toFixed(3);
    tablecontents += '<tr><td>'+promotedamountint+'</td><td><a href="https://steemit.com/x/@'+obj["author"]+'/'+obj["permlink"]+'">'+obj["title"]+'</a></td><td>'+parseFloat(obj["total_pending_payout_value"]).toFixed(3)+'</td></tr>';
}
tablecontents += '</tbody></table></center>';
$('#posts').html(tablecontents).fadeIn();
newTableObject = document.getElementById('promotable');
sorttable.makeSortable(newTableObject);
var myTH = document.getElementsByTagName("th")[0];
sorttable.innerSortFunction.apply(myTH, []);
sorttable.innerSortFunction.apply(myTH, []);
var spot1 = parseFloat(newTableObject.rows[1].cells[0].innerHTML);
spot1 = spot1+0.001;
$('#topprice').html(spot1.toFixed(3));
var spot7 = parseFloat(newTableObject.rows[7].cells[0].innerHTML);
  spot7 = spot7+0.001;
$('#7thprice').html(spot7.toFixed(3));
var spot20 = parseFloat(newTableObject.rows[20].cells[0].innerHTML);
    spot20 = spot20+0.001;
$('#20thprice').html(spot20.toFixed(3));
$('#howmuch').fadeIn();
});

</script>
<style type="text/css">

/* Sortable tables */
table.sortable thead {
    background-color:#4BA2F2;
    color:black;
    font-weight: bold;
    cursor: default;
}
  table {text-align:center;}
a { color: black; font-weight:bold;text-decoration:none;}
  a:hover {text-decoration:underline;}
  h2 {color:#1A5099;}
  h3 {color:#4BA2F2;}
  ul {list-style-type: none;}
</style>
 </head><body style="text-align:center;">
<h2>Todays top promoted posts on Steemit:</h2>
 <div id="howmuch" style="display:none;">
  <h3>How much should I promote my post ?</h3>
  <p>
  For your post to display above the page fold on an average desktop resolution (1920x1080) you need to be in the top 7 posts.<br />Each ajax pageload will show 20 posts at a time.</p>
  <ul>
    <li>Top position costs <strong>$<span id="topprice"></span> SBD</strong></li>
    <li>7th position costs <strong>$<span id="7thprice"></span> SBD </strong></li>
    <li>20th position costs <strong>$<span id="20thprice"></span> SBD</strong></li>
  </ul>
  </div>
<div id="posts">
<img src="https://i.sli.mg/tZYeyq.gif"><br />
Loading todays promoted posts from api ..
</div>
  <div id="footer"><sub>Created by <a href="https://steemit.com/@ausbitbank">ausbitbank</a> for <a href="https://steemit.com">steemit</a><br /><a href="https://steemit.com/promotion/@ausbitbank/new-tool-how-much-should-i-promote-my-post-for-steemviz-com-promo">Like this tool</a> ?</sub>
</body></html>
